"use strict";(self.webpackChunkphone_book=self.webpackChunkphone_book||[]).push([[110],{1110:function(n,e,t){t.r(e),t.d(e,{default:function(){return J}});var o,r,a,i,d,s,c,l,u,h=t(9439),p=t(2791),f=t(9434),x=t(1413),m=t(4695),b=t(1134),g=t(1775),j=t(6727),v=t(168),y=t(7691),Z=y.ZP.form(o||(o=(0,v.Z)(["\n  display: flex;\n  padding: 20px;\n  gap: 12px;\n\n  flex-direction: column;\n  max-width: 320px;\n  align-items: center;\n  border: 1px solid #b7b7bf;\n"]))),C=y.ZP.label(r||(r=(0,v.Z)(["\n  display: block;\n  width: 100%;\n  & span {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 5px;\n  }\n"]))),k=y.ZP.input(a||(a=(0,v.Z)(["\n  display: block;\n  padding: 5px;\n  width: 300px;\n"]))),w=y.ZP.button(i||(i=(0,v.Z)(["\n  padding: 5px 10px;\n"]))),P=t(9288),E=t(184),A={name:"",number:""},S=j.Ry().shape({name:j.Z_().required("Required").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan"),number:j.Z_().required("Required").matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +")}),_=function(n){var e,t,o=n.toggleModal,r=(0,f.v9)(g.Af),a=(0,f.v9)(g.a_),i=(0,f.I0)(),d=(0,b.cI)({resolver:(0,m.X)(S),defaultValues:A,mode:"onBlur"}),s=d.handleSubmit,c=d.register,l=d.reset,u=d.setValue,h=d.formState,j=h.errors,v=h.isValid;(0,p.useEffect)((function(){a&&(u("name",a.name),u("number",a.phone))}),[a,u]);return(0,E.jsxs)(Z,{autoComplete:"off",onSubmit:s(a?function(n){var e={name:n.name,phone:n.number};i(P.r.updateContact({id:a._id,contact:e})),i(P.r.setContactForUpdate(null)),l(),o()}:function(n){!function(n){if(r)return!!r.find((function(e){return e.name===n}))}(n.name)?(i(P.r.addContact(n)),l(),o()):alert("".concat(n.name," is already is in contacts"))}),children:[(0,E.jsxs)(C,{children:[(0,E.jsx)("span",{children:"Name"}),(0,E.jsx)(k,(0,x.Z)({type:"text",placeholder:"Name"},c("name"))),(0,E.jsx)("div",{style:{height:20,color:"red",fontSize:8},children:j.name&&(0,E.jsx)("span",{children:(null===(e=j.name)||void 0===e?void 0:e.message)||"Error !"})})]}),(0,E.jsxs)(C,{children:[(0,E.jsx)("span",{children:"Phone number"}),(0,E.jsx)(k,(0,x.Z)({type:"tel",placeholder:"+000 000 00 00"},c("number"))),(0,E.jsx)("div",{style:{height:20,color:"red",fontSize:8},children:j.number&&(0,E.jsx)("span",{children:(null===(t=j.number)||void 0===t?void 0:t.message)||"Error !"})})]}),(0,E.jsx)(w,{type:"button",onClick:function(){a&&i(P.r.setContactForUpdate(null)),l(),o()},children:"Cancel"}),(0,E.jsx)(w,{type:"submit",disabled:!v,children:a?"Save":"Add contact"})]})},z=y.ZP.ul(d||(d=(0,v.Z)(["\n  list-style: none;\n  border: 1px solid #b7b7bf;\n  padding: 0;\n"]))),F=y.ZP.li(s||(s=(0,v.Z)(["\n  padding: 10px;\n  display: flex;\n  justify-content: space-between;\n  & span:last-of-type {\n    margin-left: 10px;\n  }\n  border-bottom: 1px solid #b7b7bf;\n  &:nth-of-type(odd) {\n    background-color: #b7b7bf;\n  }\n"]))),M=t(5857),q=function(n){var e=n.contact,t=n.toggleModal,o=e._id,r=e.name,a=e.phone,i=(0,f.I0)();return(0,E.jsxs)(F,{children:[(0,E.jsxs)("div",{children:[(0,E.jsxs)("span",{children:[r,":"]})," ",(0,E.jsx)("span",{children:a})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("button",{onClick:function(){i(M.rs.setContactForUpdate(e)),t()},children:"Edit"}),(0,E.jsx)("button",{onClick:function(){i(M.rs.deleteContact(o))},children:"Delete"})]})]})},I=function(n){var e=n.toggleModal,t=(0,f.v9)(g.hF);return(0,E.jsx)(z,{children:t.length>0?t.map((function(n){return(0,E.jsx)(q,{contact:n,toggleModal:e},n._id)})):(0,E.jsx)("div",{children:"No data"})})},N=y.ZP.p(c||(c=(0,v.Z)(["\n  font-style: italic;\n"]))),U=t(3241),L=function(){var n=(0,f.v9)(g.f4),e=(0,f.I0)();return(0,E.jsxs)("div",{children:[(0,E.jsx)(N,{children:"Find contacts by name"}),(0,E.jsx)(k,{type:"text",name:"filter",value:n,onChange:function(n){e((0,U.p)(n.target.value.toLowerCase().trim()))}})]})},R=t(4164),V=y.ZP.div(l||(l=(0,v.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n"]))),B=y.ZP.div(u||(u=(0,v.Z)(["\n  max-width: calc(100vw - 48px);\n  max-height: calc(100vh - 24px);\n  background-color: #fff;\n  padding: 24px;\n  border-radius: 8px;\n"]))),T=document.querySelector("#modal-root"),$=function(n){var e=n.onClose,t=n.children;(0,p.useEffect)((function(){var n=function(n){"Escape"===n.code&&e()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[e]);return(0,R.createPortal)((0,E.jsx)(V,{onClick:function(n){n.currentTarget===n.target&&e()},children:(0,E.jsx)(B,{children:t})}),T)},D=t(690);function J(){var n=(0,f.I0)(),e=(0,f.v9)(g.xU),t=(0,f.v9)(g.zh),o=(0,p.useState)(!1),r=(0,h.Z)(o,2),a=r[0],i=r[1],d=function(){i(!a)};return(0,p.useEffect)((function(){n(M.rs.fetchContacts())}),[n]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("button",{type:"button",onClick:d,children:"Add contact"}),a&&(0,E.jsx)($,{onClose:d,children:(0,E.jsx)(_,{toggleModal:d})}),(0,E.jsx)("h1",{children:"Phonebook"}),(0,E.jsx)(L,{}),e&&(0,E.jsx)(D.a,{}),t&&(0,E.jsx)("div",{children:"Try again later..."}),(0,E.jsx)(I,{toggleModal:d})]})}}}]);
//# sourceMappingURL=110.a7188415.chunk.js.map